<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Welcome!{% endblock %}</title>
    <link rel="icon"
          href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
    {% block stylesheets %}
        {{ vite_entry_link_tags('front') }}
    {% endblock %}

    {% block javascripts %}
        {{ vite_entry_script_tags('front') }}
        <script>
            function switchTheme({html, sunIcon, moonIcon}) {
                html.classList.toggle('dark');
                const isDark = html.classList.contains('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                sunIcon.classList.toggle('hidden', isDark);
                moonIcon.classList.toggle('hidden', !isDark);
            }
            document.addEventListener('DOMContentLoaded', function () {
                const toggle = document.getElementById('theme-toggle');
                const html = document.documentElement;
                const sunIcon = document.getElementById('sun-icon');
                const moonIcon = document.getElementById('moon-icon');

                const savedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

                if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                    html.classList.add('dark');
                    sunIcon.classList.add('hidden');
                    moonIcon.classList.remove('hidden');
                }

                toggle.addEventListener('click', () => {
                    const props = {
                        html,
                        sunIcon,
                        moonIcon,
                    }
                    if (!document.startViewTransition) {
                        switchTheme(props)
                        return;
                    }

                    const themeTransition = document.startViewTransition(() => switchTheme(props));
                });
            });
        </script>
    {% endblock %}
</head>
<body class="font-manrope antialiased bg-background text-foreground">
<header class="w-dvw">
    {% block navbar %}
        <nav class="border-b border-nordic-green shadow h-14 flex items-center justify-between px-4">
            <div class="flex items-center gap-3 animate-in slide-in-from-left duration-200">
                <div class="text-3xl font-sora font-bold text-nordic-green">Ø</div>
                <div class="text-xl font-sora font-bold text-nordic-green hidden sm:block">Orlog</div>
            </div>

            <div class="flex flex-row items-center gap-2 animate-in slide-in-from-right">
                <button
                    id="theme-toggle"
                    class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
                    aria-label="Basculer le thème"
                >
                    <twig:ux:icon name="lucide:sun" id="sun-icon" class="text-nordic-green" />
                    <twig:ux:icon name="lucide:moon" id="moon-icon" class="text-nordic-green hidden" />
                </button>
                <a href="{{ path('_logout_main') }}">
                <twig:ux:icon name='lucide:power' class="text-nordic-green"/>
                </a>
            </div>
        </nav>
    {% endblock %}
</header>

<main class="min-h-screen">
    {% block body %}
    {% endblock %}
</main>

<footer class="border-t border-gray-200 py-6 text-center text-sm text-gray-500">
    {% block footer %}
        <p>&copy; 2026 Orlog. <a href="/mentions-legales" class="hover:text-nordic-green transition-colors">Mentions
                légales</a></p>
    {% endblock %}
</footer>
</body>
</html>
